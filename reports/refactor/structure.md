# Refactor Structure Audit

Generated: 2025-11-02T09:40:46.618Z

## app

- Total directories: 341
- Total files: 442
- File extensions:
  - `.tsx`: 271
  - `.ts`: 169
  - `.css`: 1
  - `.png`: 1

````
app/
- _components/
  - auth/
    - WhatsAppLoginNotice.tsx
  - common/
    - Empty.tsx
    - PaymentNotes.tsx
    - Skeleton.tsx
  - community/
    - BadgeCard.tsx
    - ClipCard.tsx
    - FanClubCard.tsx
    - FanHero.tsx
    - LeaderboardCard.tsx
    - PollWidget.tsx
    - PostCard.tsx
  - flags/
    - useFlags.ts
  - home/
    - CommunityStrip.tsx
    - Feed.tsx
    - LiquidScreens.tsx
    - MembersWidget.tsx
    - PartnerTiles.tsx
    - PersonalizedRail.tsx
    - RewardsWidget.tsx
  - match/
    - HighlightsCarousel.tsx
    - HighlightsRail.tsx
    - LiveTicker.tsx
    - MatchCard.tsx
    - MatchDetailSheet.tsx
    - StandingsTable.tsx
  - matchday/
    - ActionRail.tsx
    - FanChat.tsx
    - H2HBoard.tsx
    - HighlightsRail.tsx
    - LineupsBoard.tsx
    - MatchPlayer.tsx
    - PlayerControls.tsx
    - SegmentedTabs.tsx
    - StatsBoard.tsx
    - StreamingHero.tsx
    - TimelineList.tsx
  - more/
    - EventsWidget.tsx
    - FooterBrand.tsx
    - FundraiserWidget.tsx
    - MembershipWidget.tsx
    - MoreDashboard.tsx
    - ProfileCard.tsx
    - QuickTilesRow.tsx
    - SettingsList.tsx
    - WalletWidget.tsx
  - onboarding/
    - OnboardingModal.tsx
  - payments/
    - UssdPayButton.tsx
  - pwa/
    - NativeAppHandoff.tsx
    - PwaHelpers.tsx
    - WebPushGate.tsx
  - services/
    - insurance/
    - sacco/
    - shared/
    - HistoryList.tsx
    - PerkBanner.tsx
    - ServiceCard.tsx
    - ServiceHero.tsx
  - shell/
    - BottomNav.tsx
    - PageShell.tsx
    - SubpageHeader.tsx
  - shop/
    - BundleCard.tsx
    - ExclusiveCard.tsx
    - HeroDrop.tsx
    - HybridPayModal.tsx
    - OrderTracker.tsx
    - ProductPurchase.tsx
    - RecommendationCarousel.tsx
    - ShopCatalog.tsx
  - telemetry/
    - ClientErrorBoundary.tsx
    - PageViewTracker.tsx
  - tickets/
    - CheckoutCard.tsx
    - FixtureCard.tsx
    - StadiumMap.tsx
    - TicketHero.tsx
    - TicketWalletCard.tsx
    - ZoneSelector.tsx
    - ZoneSheet.tsx
  - ui/
    - BottomNav.tsx
    - EmptyState.tsx
    - GamificationStrip.tsx
    - GlassButton.tsx
    - GlassCard.tsx
    - GlassTile.tsx
    - HeroBlock.tsx
    - MotionToggle.tsx
    - QuickTiles.tsx
    - TopAppBar.tsx
  - widgets/
    - EmptyState.tsx
    - HeroBlock.tsx
    - SectionHeader.tsx
    - WidgetRow.tsx
  - BottomNavContainer.tsx
- _config/
  - home.ts
  - services.ts
- _data/
  - community.ts
  - fanProfile.ts
  - fixtures.ts
  - matchday.ts
  - matches.ts
  - more.ts
  - rewards.ts
  - services.ts
  - shop_v2.ts
- _lib/
  - api.ts
  - auth.ts
  - navigation.ts
  - push.ts
  - pwa.ts
  - responses.ts
  - supabase.ts
- (onboarding)/
  - _components/
    - OnboardingChat.tsx
    - socketClient.ts
- (routes)/
  - _components/
    - A11yNotice.tsx
    - HomeClient.tsx
    - HomeHeroSection.tsx
    - HomeInteractiveLayer.tsx
    - useHomeContent.ts
  - _lib/
    - backend-url.ts
  - auth/
    - login/
    - whatsapp/
  - cart/
    - page.tsx
  - clubs/
    - [id]/
    - page.tsx
  - events/
    - [id]/
    - page.tsx
  - fundraising/
    - [slug]/
    - page.tsx
  - home/
    - _components/
    - page.tsx
  - matches/
    - _components/
    - live/
    - error.tsx
    - loading.tsx
    - not-found.tsx
    - page.tsx
  - media/
    - _components/
    - _data/
    - [slug]/
    - page.tsx
  - members/
    - _components/
    - page.tsx
  - membership/
    - page.tsx
  - more/
    - loading.tsx
    - not-found.tsx
    - page.tsx
  - news/
    - _components/
    - _data/
    - [slug]/
    - highlights/
    - page.tsx
  - onboarding/
    - page.tsx
  - partners/
    - [slug]/
  - payments/
    - page.tsx
  - rewards/
    - _components/
    - page.tsx
  - services/
    - _components/
    - insurance/
    - savings/
    - page.tsx
  - settings/
    - _components/
    - page.tsx
  - shop/
    - _components/
    - _data/
    - _hooks/
    - _logic/
    - [slug]/
    - loading.tsx
    - page.tsx
    - ShopClientPage.tsx
  - tickets/
    - _components/
    - [id]/
    - scan/
    - transfer/
    - page.tsx
  - wallet/
    - page.tsx
- admin/
  - (auth)/
    - login/
  - (dashboard)/
    - _components/
    - community/
    - content/
    - fundraising/
    - match-ops/
    - membership/
    - orders/
    - realtime/
    - reports/
    - rewards/
    - services/
    - settings/
    - shop/
    - sms/
    - tickets/
    - translations/
    - users/
    - ussd/
    - layout.tsx
    - page.tsx
  - api/
    - _lib/
    - admin/
    - auth/
    - community/
    - content/
    - matches/
    - reports/
    - rewards/
    - services/
    - shop/
    - sms/
    - tickets/
    - upload/
    - users/
  - health/
    - route.ts
  - layout.tsx
- api/
  - _lib/
    - auth.ts
    - supabase.ts
    - user-helpers.ts
  - [...path]/
    - route.ts
  - admin/
    - _lib/
    - auth/
    - dashboard/
    - match-ops/
    - me/
    - shop-orders/
    - sms/
    - ticket-orders/
    - translations/
  - auth/
    - otp/
    - whatsapp/
  - backend/
    - [...path]/
  - cast/
    - route.ts
  - chat/
    - route.ts
  - clubs/
    - route.ts
  - community/
    - posts/
  - content/
    - [slug]/
    - route.ts
  - e2e/
    - [...path]/
  - events/
    - [id]/
    - route.ts
  - fan/
    - feed/
  - feed/
    - route.ts
  - flags/
    - route.ts
  - health/
    - route.ts
  - home/
    - route.ts
  - insurance/
    - policy/
    - quote/
  - live/
    - match/
    - scoreboard/
  - matches/
    - [id]/
    - events/
    - tickets/
    - route.ts
  - me/
    - favorites/
    - onboarding/
    - prefs/
    - route.ts
  - media/
    - highlights/
  - members/
    - [id]/
    - count/
    - route.ts
  - merchant/
    - tapmomo/
  - merchants/
    - [merchantId]/
  - notifications/
    - subscription/
  - nps/
    - route.ts
  - onboarding/
    - message/
    - sessions/
  - orders/
    - [id]/
  - partners/
    - [slug]/
  - passes/
    - route.ts
  - payments/
    - checkout/
    - mobile-money/
    - pending/
  - polls/
    - vote/
  - rewards/
    - claimTicket/
    - events/
    - summary/
  - sacco/
    - deposit/
  - shop/
    - orders/
    - products/
  - sms/
    - process/
  - telemetry/
    - app-state/
  - tickets/
    - orders/
    - passes/
    - _queries.ts
    - route.ts
  - transactions/
    - nfc/
  - users/
    - route.ts
  - wallet/
    - summary/
    - transactions/
    - route.ts
  - webhook/
    - whatsapp/
- community/
  - _data/
    - polls-data.ts
    - stories.ts
  - missions/
    - page.tsx
  - polls/
    - [slug]/
  - predict/
    - page.tsx
  - stories/
    - [slug]/
  - CommunityClient.tsx
  - page.tsx
- gate/
  - page.tsx
- legal/
  - privacy/
    - page.tsx
  - terms/
    - page.tsx
- link/
  - route.ts
- matchday/
  - page.tsx
- members/
  - _components/
    - MembersListClient.tsx
  - [id]/
    - MemberProfileAnalytics.tsx
    - page.tsx
  - page.tsx
- membership/
  - upgrade/
    - page.tsx
- more/
  - rewards/
    - page.tsx
  - settings/
    - page.tsx
  - wallet/
    - _components/
    - page.tsx
- mytickets/
  - MyTicketsClientPage.tsx
  - page.tsx
- onboarding/
  - _components/
    - OnboardingChat.tsx
  - Switcher.tsx
- orders/
  - page.tsx
- profile/
  - page.tsx
- services/
  - error.tsx
  - loading.tsx
  - not-found.tsx
- settings/
  - _components/
    - MatchReminderToggles.tsx
  - about/
    - page.tsx
  - page.tsx
- shop/
  - error.tsx
  - loading.tsx
  - not-found.tsx
  - ShopExperience.tsx
- support/
  - page.tsx
- tickets/
  - error.tsx
  - loading.tsx
  - not-found.tsx
- wallet/
  - history/
    - page.tsx
  - top-up/
    - page.tsx
- global-error.tsx
- globals.css
- icon.png
- layout.tsx
- loading.tsx
- navigation.tsx
- not-found.tsx
- page.tsx
- providers.tsx
````

## src

- Total directories: 44
- Total files: 229
- File extensions:
  - `.tsx`: 122
  - `.ts`: 105
  - `.css`: 2

````
src/
- components/
  - a11y/
    - SkipNavLink.tsx
  - admin/
    - content/
    - dashboard/
    - fundraising/
    - membership/
    - orders/
    - reports/
    - rewards/
    - services/
    - settings/
    - shop/
    - translations/
    - ui/
    - users/
    - AdminOfflineNotice.tsx
    - AdminShell.tsx
    - DataTable.tsx
  - auth/
    - admin-login-form.tsx
  - layout/
    - BottomNav.tsx
    - LanguageSwitcher.tsx
    - ThemeToggle.tsx
  - payments/
    - UssdOnlyNotice.tsx
    - UssdPayButton.tsx
  - ui/
    - accordion.tsx
    - alert-dialog.tsx
    - alert.tsx
    - aspect-ratio.tsx
    - avatar.tsx
    - badge-variants.ts
    - badge.tsx
    - breadcrumb.tsx
    - button-variants.ts
    - button.tsx
    - calendar.tsx
    - card.tsx
    - carousel.tsx
    - chart.tsx
    - checkbox.tsx
    - collapsible.tsx
    - command.tsx
    - context-menu.tsx
    - dialog.tsx
    - drawer.tsx
    - dropdown-menu.tsx
    - form-context.tsx
    - form.tsx
    - glass-card.tsx
    - hover-card.tsx
    - input-otp.tsx
    - input.tsx
    - label.tsx
    - menubar.tsx
    - navigation-menu-constants.ts
    - navigation-menu.tsx
    - optimized-image.tsx
    - pagination.tsx
    - popover.tsx
    - progress.tsx
    - radio-group.tsx
    - resizable.tsx
    - scroll-area.tsx
    - select.tsx
    - separator.tsx
    - sheet.tsx
    - sidebar-constants.ts
    - sidebar-context.tsx
    - sidebar.tsx
    - skeleton.tsx
    - slider.tsx
    - sonner.tsx
    - switch.tsx
    - table.tsx
    - tabs.tsx
    - textarea.tsx
    - toast.tsx
    - toaster.tsx
    - toggle-group.tsx
    - toggle-variants.ts
    - toggle.tsx
    - tooltip.tsx
    - use-toast.ts
  - mobile-money-payment-history.tsx
  - sms-permission-card.tsx
- config/
  - admin-rbac.ts
  - client.ts
  - env.ts
- hooks/
  - use-admin-access.ts
  - use-mobile.tsx
  - use-toast.ts
  - useAnonymousSupabaseUser.ts
- integrations/
  - supabase/
    - client.ts
    - env.ts
    - server.ts
    - types.ts
- lib/
  - admin/
    - csrf.ts
  - api/
    - admin/
    - admin.ts
    - community.ts
    - fan.ts
    - fundraising.ts
    - home.ts
    - index.ts
    - membership.ts
    - onboarding.ts
    - query-client.ts
    - query-provider.tsx
    - shop.ts
    - supabase-client.ts
    - tapmomo.ts
    - tickets.ts
    - wallet.ts
    - whatsapp-auth.ts
  - capacitor/
    - sms-reader.ts
  - crypto/
    - hmac.ts
  - home/
    - surface-data.ts
  - mobile/
    - capacitor-events.ts
    - expo-notifications.ts
    - fanapp-plugin.ts
  - native/
    - links.ts
    - tapmomo.ts
  - observability/
    - admin.ts
    - node-observability.ts
    - sentry-config.ts
  - reports/
    - scheduler.ts
  - server/
    - otp/
    - fan-session.ts
    - onboarding.ts
    - openai.ts
    - origins.ts
    - rate-limit.ts
    - redis-client.ts
    - request-ip.ts
  - supabase/
    - client.ts
  - telemetry/
    - app-state-handler.ts
  - analytics.ts
  - auth.ts
  - content.ts
  - db-errors.ts
  - db.ts
  - flags.ts
  - formatters.ts
  - msisdn.ts
  - nfc.ts
  - observability.ts
  - otp.ts
  - payments.ts
  - phone.ts
  - redis.ts
  - runtime-config.ts
  - storage.ts
  - supabase-edge.ts
  - track.ts
  - ussd.ts
  - utils.ts
  - whatsapp.ts
- providers/
  - admin-feature-flags-provider.tsx
  - admin-locale-provider.tsx
  - admin-session-provider.tsx
  - auth-provider.tsx
  - i18n-provider.tsx
  - motion-provider.tsx
  - realtime-provider.tsx
  - theme-provider.tsx
- services/
  - admin/
    - dashboard.ts
    - feature-flags.ts
    - service-client-errors.ts
    - service-client.ts
    - sms.ts
    - translations.ts
  - http-client.ts
- types/
  - admin-otp.ts
  - admin-sms.ts
  - cron-parser.d.ts
  - shims-next-axiom.d.ts
- views/
  - AdminCommunityMissionsView.tsx
  - AdminCommunityView.tsx
  - AdminMatchOpsView.tsx
  - AdminOtpView.tsx
  - AdminRealtimeView.tsx
  - AdminSmsView.tsx
  - AdminTicketsView.tsx
  - AdminUssdView.tsx
  - CommunityView.tsx
  - FundraisingView.tsx
  - GateView.tsx
  - HomeView.tsx
  - Index.tsx
  - LoginView.tsx
  - MatchesView.tsx
  - Membership.tsx
  - MoreView.tsx
  - NewsHighlightsView.tsx
  - OnboardingView.tsx
  - PartnerServicesView.tsx
  - TicketsView.tsx
  - TicketTransferView.tsx
  - WalletView.tsx
- App.css
- index.css
- vite-env.d.ts
````

## packages

- Total directories: 20
- Total files: 64
- File extensions:
  - `.ts`: 27
  - `.tsx`: 20
  - `.json`: 9
  - `.js`: 3
  - `.cjs`: 2
  - `<none>`: 2
  - `.md`: 1

````
packages/
- contracts/
  - src/
    - commerce.ts
    - community.ts
    - index.ts
    - members.ts
    - news.ts
    - onboarding.ts
    - rewards.ts
    - services.ts
  - package.json
  - tsconfig.json
- design-tokens/
  - src/
    - index.ts
  - package.json
  - tsconfig.json
- mobile/
  - __tests__/
    - otp-smoke.test.ts
  - app/
    - (home)/
    - (onboarding)/
    - (tabs)/
    - _layout.tsx
  - e2e/
    - tab-navigation.smoke.e2e.ts
  - fastlane/
    - Appfile
    - Fastfile
  - src/
    - api/
    - providers/
    - theme/
    - types/
    - ui/
  - widgets/
    - src/
    - package.json
    - README.md
    - tsconfig.json
  - app.config.ts
  - App.tsx
  - babel.config.js
  - eas.json
  - eslint.config.js
  - jest.config.cjs
  - jest.setup.ts
  - metro.config.js
  - package.json
  - prettier.config.cjs
  - tsconfig.json
````

## supabase

- Total directories: 24
- Total files: 71
- File extensions:
  - `.sql`: 35
  - `.ts`: 21
  - `<none>`: 12
  - `.toml`: 1
  - `.json`: 1
  - `.md`: 1

````
supabase/
- .temp/
  - pooler-url
  - postgres-version
  - project-ref
  - rest-version
  - storage-version
- functions/
  - _shared/
    - client.ts
    - env.ts
    - http.ts
    - README.md
    - signing.ts
  - award_points/
    - index.ts
  - event-checkin/
    - index.ts
  - handle_momo_webhook/
    - index.ts
  - issue_ticket_perk/
    - index.ts
  - issue-perk/
    - index.ts
  - issue-policy/
    - index.ts
  - match-centre/
    - index.ts
  - match-notifications/
    - index.ts
  - match-payment/
    - index.ts
  - moderate/
    - index.ts
  - ops-digest/
    - index.ts
  - parse-sms/
    - index.ts
  - qr-token/
    - index.ts
  - realtime-ping/
    - index.ts
  - reconcile/
    - index.ts
  - sms-ingest/
    - index.ts
  - sms-webhook/
    - index.ts
  - deno.json
- migrations/
  - 20240505120000_fan_profile_codes.sql
  - 20250219154500_report_schedule_metadata.sql
  - 20251011000000_core.sql
  - 202510110001_rls.sql
  - 20251012_rayon_schema.sql
  - 202510130001_mvp_schema.sql
  - 202510130002_admin_indexes.sql
  - 202510130003_rayon_ticket_orders.sql
  - 202510130004_rewards_engine.sql
  - 202510130005_shop_promotions.sql
  - 20251014_fans_clubs_events.sql
  - 20251019123014_remote_schema.sql
  - 20251020_admin_alignment.sql
  - 20251021_add_partner_slug.sql
  - 20251025000000_p4_dashboard_i18n.sql
  - 202510251001_p4_dashboard_views.sql
  - 20251030_member_directory.sql
  - 202511010001_tapmomo_merchants.sql
  - 202511010101_admin_panel_extension.sql
  - 20251106_security_views.sql
  - 20251109_security_hardening.sql
  - 20251110_personalization_schema.sql
  - 20251111_add_partners_table.sql
  - 20251112000000_cleanup_camelcase.sql
  - 20251112120000_drop_membership_camel.sql
  - 20251113100000_phase1_rls_policies.sql
  - 20251113123000_phase2_schema_alignment.sql
  - 20251114131500_admin_community_rate_limits.sql
  - 202511210900_match_centre_payloads.sql
  - 20251212090000_data_retention.sql
  - 20251214093000_anon_public_views.sql
  - 20251215000000_sms_payment_schema.sql
  - 20251215103000_merchants_transactions.sql
  - 20251219090000_match_notifications.sql
- seed/
  - 20251013_seed.sql
- supabase/
  - .temp/
    - gotrue-version
    - pooler-url
    - postgres-version
    - project-ref
    - rest-version
    - storage-version
- .gitignore
- config.toml
````
